---
title: Semantic Chunking
---

Semantic chunking is a method of splitting documents into smaller chunks by analyzing semantic similarity between text segments using embeddings. It uses the chonkie library to identify natural breakpoints where the semantic meaning changes significantly, based on a configurable similarity threshold. This helps preserve context and meaning better than fixed-size chunking by ensuring semantically related content stays together in the same chunk, while splitting occurs at meaningful topic transitions.

<Steps>

  <Step title="Create a Python file">
    ```bash
    touch semantic_chunking.py
    ```
  </Step>


  <Step title="Add the following code to your Python file">
    ```python semantic_chunking.py
    import asyncio

    from agno.agent import Agent
    from agno.db.postgres import PostgresDb
    from agno.knowledge.chunking.semantic import SemanticChunking
    from agno.knowledge.embedder.openai import OpenAIEmbedder
    from agno.knowledge.knowledge import Knowledge
    from agno.knowledge.reader.pdf_reader import PDFReader
    from agno.vectordb.pgvector import PgVector

    db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"
    embedder = OpenAIEmbedder(id="text-embedding-3-small", dimensions=1536)
    knowledge = Knowledge(
        vector_db=PgVector(table_name="recipes_semantic_chunking", db_url=db_url, embedder=embedder),
        contents_db=PostgresDb(db_url=db_url, knowledge_table="recipe_contents"),
    )
    asyncio.run(
        knowledge.add_content_async(
            url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf",
            reader=PDFReader(
                name="Semantic Chunking Reader",
                chunking_strategy=SemanticChunking(
                    embedder=embedder,
                    chunk_size=500,
                    similarity_threshold=0.5,
                ),
            ),
        )
    )

    agent = Agent(
        knowledge=knowledge,
        search_knowledge=True,
    )

    agent.print_response("How to make Thai curry?", markdown=True)

    ```
  </Step>

  <Snippet file="create-venv-step.mdx" />

  <Step title="Install libraries">
    ```bash
    pip install -U sqlalchemy psycopg pgvector agno chonkie openai
    ```
  </Step>

  <Snippet file="set-openai-key.mdx" />

  <Snippet file="run-pgvector-step.mdx" />

  <Step title="Run the script">
    <CodeGroup>
    ```bash Mac
    python semantic_chunking.py
    ```

    ```bash Windows
    python semantic_chunking.py
    ```
    </CodeGroup>
  </Step>

</Steps>



## Semantic Chunking Params

<Snippet file="chunking-semantic.mdx" />
