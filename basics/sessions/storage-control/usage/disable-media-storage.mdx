---
title: Disable Media Storage
description: Learn how to control whether media files are persisted to your database
---

By default, Agno stores all media (images, videos, audio, files) uploaded by users in the database. For applications with heavy media usage, this can quickly fill your database.

The `store_media` flag lets you control this behavior. When set to `False`, media is still available during execution (so tools can process it), but it's not persisted to the database.

## Key Concepts

**Runtime vs. Storage**: Media is available during the run and processed by tools, but scrubbed before database persistence:

- ✅ Media is available to your agent/team during execution
- ✅ Tools can access and process media
- ✅ The model receives media (if `send_media_to_model=True`)
- ⚠️ Media is not persisted to the database

## When to Use This

Use `store_media=False` when:

- **Storage optimization**: You handle large media files and want to reduce database size
- **External storage**: You store media in dedicated services (S3, Cloudinary, etc.) and only need URLs
- **Privacy compliance**: Media contains sensitive data that shouldn't be stored long-term
- **Processing only**: You only need to process media during the run, not store it permanently
- **Temporary uploads**: Media is only needed for the current interaction

## Basic Example

<Tabs>
  <Tab title="Agent">
```python
from agno.agent import Agent
from agno.db.sqlite import SqliteDb
from agno.models.openai import OpenAIChat

agent = Agent(
    model=OpenAIChat(id="gpt-4o"),
    db=SqliteDb(db_file="tmp/agent.db"),
    store_media=False,  # Don't persist uploaded files
)

# Agent can process the image, but it won't be stored
agent.run(
    "Describe this image",
    images=["https://example.com/image.jpg"]
)

# Check what was stored
stored_run = agent.get_last_run_output()
print(f"Images in stored run: {stored_run.images}")  # Will be None or []
```
  </Tab>

  <Tab title="Team">
```python
from agno.team import Team
from agno.agent import Agent
from agno.db.sqlite import SqliteDb
from agno.models.openai import OpenAIChat

team = Team(
    model=OpenAIChat(id="gpt-4o"),
    members=[
        Agent(name="Vision Expert", role="You analyze images"),
    ],
    db=SqliteDb(db_file="tmp/team.db"),
    store_media=False,  # Don't persist uploaded files
)

# Team can process the image, but it won't be stored
team.run(
    "Describe this image",
    images=["https://example.com/image.jpg"]
)

# Check what was stored
stored_run = team.get_last_run_output()
print(f"Images in stored run: {stored_run.images}")  # Will be None or []
```
  </Tab>
</Tabs>

## External Storage Example

When using external storage services:

<Tabs>
  <Tab title="Agent">
```python
from agno.agent import Agent
from agno.db.postgres import PostgresDb
from agno.models.openai import OpenAIChat
import boto3

# Upload to S3 first
s3_client = boto3.client('s3')
image_url = upload_to_s3(image_data)  # Your upload logic

db = PostgresDb(
    host="localhost",
    port=5432,
    user="agno",
    password="agno",
    database="agno",
)

agent = Agent(
    model=OpenAIChat(id="gpt-4o"),
    db=db,
    store_media=False,  # Media already in S3, no need to duplicate
)

# Process image from S3 URL
agent.run(
    f"Analyze this product image: {image_url}",
    metadata={"s3_url": image_url}  # Store reference, not file
)
```
  </Tab>

  <Tab title="Team">
```python
from agno.team import Team
from agno.agent import Agent
from agno.db.postgres import PostgresDb
from agno.models.openai import OpenAIChat
import boto3

# Upload to S3 first
s3_client = boto3.client('s3')
image_url = upload_to_s3(image_data)  # Your upload logic

db = PostgresDb(
    host="localhost",
    port=5432,
    user="agno",
    password="agno",
    database="agno",
)

team = Team(
    model=OpenAIChat(id="gpt-4o"),
    members=[
        Agent(name="Image Analyzer", role="You analyze product images"),
        Agent(name="Describer", role="You write descriptions"),
    ],
    db=db,
    store_media=False,  # Media already in S3, no need to duplicate
)

# Process image from S3 URL
team.run(
    f"Analyze this product image: {image_url}",
    metadata={"s3_url": image_url}  # Store reference, not file
)
```
  </Tab>
</Tabs>

## Document Processing Example

For applications processing temporary documents:

<Tabs>
  <Tab title="Agent">
```python
from agno.agent import Agent
from agno.db.sqlite import SqliteDb
from agno.models.openai import OpenAIChat

agent = Agent(
    model=OpenAIChat(id="gpt-4o"),
    db=SqliteDb(db_file="tmp/agent.db"),
    store_media=False,  # Don't store temporary document uploads
    markdown=True,
)

# Process document without storing it
agent.print_response(
    "Extract the key information from this document",
    files=["path/to/resume.pdf"]
)
# Document is processed, key info extracted, but PDF not stored
```
  </Tab>

  <Tab title="Team">
```python
from agno.team import Team
from agno.agent import Agent
from agno.db.sqlite import SqliteDb
from agno.models.openai import OpenAIChat

team = Team(
    model=OpenAIChat(id="gpt-4o"),
    members=[
        Agent(name="Reader", role="You extract information from documents"),
        Agent(name="Summarizer", role="You summarize key points"),
    ],
    db=SqliteDb(db_file="tmp/team.db"),
    store_media=False,  # Don't store temporary document uploads
    markdown=True,
)

# Process document without storing it
team.print_response(
    "Extract the key information from this document",
    files=["path/to/resume.pdf"]
)
# Document is processed, key info extracted, but PDF not stored
```
  </Tab>
</Tabs>

## Minimal Storage Configuration

Combine all storage flags for maximum optimization:

<Tabs>
  <Tab title="Agent">
```python
from agno.agent import Agent
from agno.db.postgres import PostgresDb
from agno.models.openai import OpenAIChat
from agno.tools.duckduckgo import DuckDuckGoTools

db = PostgresDb(
    host="localhost",
    port=5432,
    user="agno",
    password="agno",
    database="agno",
)

agent = Agent(
    model=OpenAIChat(id="gpt-4o"),
    tools=[DuckDuckGoTools()],
    db=db,
    add_history_to_context=True,
    num_history_runs=5,
    # Minimize database storage
    store_media=False,
    store_tool_messages=False,
    store_history_messages=False,
)

# Agent works normally with full capabilities
# Only database storage is optimized
agent.print_response("Search for AI news and summarize")
```
  </Tab>

  <Tab title="Team">
```python
from agno.team import Team
from agno.agent import Agent
from agno.db.postgres import PostgresDb
from agno.models.openai import OpenAIChat
from agno.tools.duckduckgo import DuckDuckGoTools

db = PostgresDb(
    host="localhost",
    port=5432,
    user="agno",
    password="agno",
    database="agno",
)

team = Team(
    model=OpenAIChat(id="gpt-4o"),
    members=[
        Agent(name="Researcher", tools=[DuckDuckGoTools()]),
        Agent(name="Writer", role="You write clear summaries"),
    ],
    db=db,
    add_history_to_context=True,
    num_history_runs=5,
    # Minimize database storage
    store_media=False,
    store_tool_messages=False,
    store_history_messages=False,
)

# Team works normally with full capabilities
# Only database storage is optimized
team.print_response("Search for AI news and summarize")
```
  </Tab>
</Tabs>

## Learn More

- [Storage Control Overview](/basics/sessions/storage-control/overview)
- [Multimodal Input](/basics/multimodal/overview)
- [Session Storage](/basics/storage/overview)

