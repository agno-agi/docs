---
title: Agent Sessions
sidebarTitle: Agent
description: Agent-specific session features and history management.
keywords: [sessions, agent sessions, conversation history, session summaries]
---

<Note>
New to sessions? Start with the [Sessions Overview](/basics/sessions/overview) to learn the basics of how sessions work in Agno.
</Note>

Agents have several powerful features for managing conversation history and session data. This page covers agent-specific capabilities like customizing session summaries, accessing chat history, and controlling what gets stored.

## Session Summaries

As covered in the [Sessions Overview](/basics/sessions/overview#session-summaries), session summaries help manage long conversations by condensing them into concise summaries. For agents, you have additional control over how these summaries are generated and retrieved.

### Retrieving Summaries

Once you've enabled session summaries (`enable_session_summaries=True`), you can access them programmatically:

```python
from agno.agent import Agent
from agno.models.openai import OpenAIChat
from agno.db.sqlite import SqliteDb

db = SqliteDb(db_file="tmp/data.db")

agent = Agent(
    model=OpenAIChat(id="gpt-4o-mini"),
    db=db,
    enable_session_summaries=True,
)

# Have a conversation
agent.print_response(
    "What can you tell me about quantum computing?",
    session_id="session_123",
)

agent.print_response(
    "I would also like to know about LLMs.",
    session_id="session_123",
)

# Get the summary
session_summary = agent.get_session_summary(session_id="session_123")
print(f"Summary: {session_summary.summary}")      # Condensed conversation summary
print(f"Topics: {session_summary.topics}")        # List of topics discussed (optional)
```

The summary object contains:
- **`summary`** (str): A concise summary of the conversation
- **`topics`** (list, optional): Key topics discussed during the session
- **`updated_at`** (datetime, optional): When the summary was last updated

### Customizing Summaries

Want more control over how summaries are generated? Use the `SessionSummaryManager` to customize the model and prompts:

```python
from agno.agent import Agent
from agno.session import SessionSummaryManager
from agno.models.openai import OpenAIChat
from agno.db.sqlite import SqliteDb

db = SqliteDb(db_file="agno.db")

# Customize how summaries are generated
session_summary_manager = SessionSummaryManager(
    model=OpenAIChat(id="gpt-4o-mini"),  # Use a specific model for summaries
    session_summary_prompt="Create a brief, bullet-point summary focusing on key decisions and action items:",
    # Or use summary_request_message to modify the user message instead:
    # summary_request_message="Write the summary in Spanish.",
)

agent = Agent(
    model=OpenAIChat(id="gpt-4o"),  # Agent uses gpt-4o
    db=db,
    session_summary_manager=session_summary_manager,  # But summaries use gpt-4o-mini
)
```

**Customization options:**
- **`model`**: Use a different (often cheaper/faster) model for generating summaries
- **`session_summary_prompt`**: Override the entire system prompt that instructs how to create summaries
- **`summary_request_message`**: Customize the user message sent to request the summary (e.g., to change language or format)

This is useful when you want to use a cheaper/faster model for summaries while keeping your main agent on a more powerful model.

See the [Session Summary Manager](/reference/session/summary_manager) reference for more details.

## Accessing Session History

Agents with a database configured automatically track message and run history. You have multiple ways to access and use this history:

<Note>
All history features require a database. See the [Sessions Overview](/basics/sessions/overview#multi-user-conversations) for how to set up session storage.
</Note>

### Reading History Programmatically

```python
# Get all messages for this agent in the current session
messages = agent.get_messages_for_session()

# Get all unique messages across the session (deduplicated)
chat_history = agent.get_chat_history()
```

### Adding History to Context

The most common pattern is to automatically include recent history as context for each new message. This is what gives your agent "memory" of the conversation - without it, every message would be treated as a fresh start.

As covered in the [Sessions Overview](/basics/sessions/overview#multi-user-conversations), use `add_history_to_context=True` and `num_history_runs` to control how much history is included:

```python
agent = Agent(
    model=OpenAIChat(id="gpt-4o-mini"),
    db=db,
    add_history_to_context=True,  # Include history automatically
    num_history_runs=3,             # Last 3 runs
)
```

You can be even more granular by controlling the number of *messages* rather than *runs*:

```python
agent = Agent(
    model=OpenAIChat(id="gpt-4o-mini"),
    db=db,
    add_history_to_context=True,
    num_history_messages=10,  # Last 10 messages (regardless of runs)
)
```

### Letting the Agent Access History

Instead of always including history in context, you can give the agent a *tool* to read history when it needs it:

```python
agent = Agent(
    model=OpenAIChat(id="gpt-4o-mini"),
    db=db,
    read_chat_history=True,  # Adds a get_chat_history() tool
)
```

The agent can now call `get_chat_history()` to retrieve any message from the conversation when it needs to reference something specific.

### Tool Call History

For debugging or auditing, you can also give the agent access to its tool call history:

```python
agent = Agent(
    model=OpenAIChat(id="gpt-4o-mini"),
    db=db,
    read_tool_call_history=True,  # Adds a get_tool_call_history() tool
)
```

<Check>
**Recommended Configuration**

For the best experience, we recommend combining these three parameters:

```python
agent = Agent(
    model=OpenAIChat(id="gpt-4o-mini"),
    db=db,
    add_history_to_context=True,  # Always include recent history
    num_history_runs=3,             # Last 3 runs as baseline
    read_chat_history=True,         # Let agent access older history when needed
)
```

This gives the agent recent context by default while allowing it to look further back when necessary.
</Check>

Here's a complete example showing history in action:

```python
from agno.agent import Agent
from agno.models.openai import OpenAIChat
from agno.db.sqlite import SqliteDb

agent = Agent(
    model=OpenAIChat(id="gpt-4o-mini"),
    db=SqliteDb(db_file="tmp/data.db"),
    add_history_to_context=True,  # Include last 3 runs automatically
    num_history_runs=3,
    read_chat_history=True,  # Let agent access full history via tool
)

# First interaction
agent.print_response("Share a 2 sentence horror story", stream=True)

# Agent can reference the history automatically
agent.print_response("What was my first message?", stream=True)
# The agent will answer correctly because history is in context
```

## Controlling What Gets Stored

As sessions accumulate data, your database can grow quickly. Agno gives you fine-grained control over what gets persisted with three storage flags:

- **`store_media`** - Images, videos, audio, and file uploads
- **`store_tool_messages`** - Tool calls and their results
- **`store_history_messages`** - Historical messages from previous runs

### How Storage Control Works

Here's the key insight: **these flags only affect database persistence, not runtime behavior**. 

During execution, your agent has access to everything - media, tool results, history. The data only gets filtered out when saving to the database after the run completes. This means:

✅ Your agent functionality is unchanged  
✅ Tools get all the data they need  
✅ Only storage is optimized  
✅ Token metrics still reflect actual usage

<Warning>
**Important: `store_tool_messages=False` removes message pairs**

When you disable tool message storage, Agno removes both the tool result *and* the assistant message containing the tool call. This is required to maintain valid message sequences that model providers expect.

Your metrics will still show the actual tokens used, including the removed tool messages.
</Warning>

### Example Usage

Here's how to minimize storage while keeping your agent fully functional:

```python
from agno.agent import Agent
from agno.models.openai import OpenAIChat
from agno.tools.duckduckgo import DuckDuckGoTools
from agno.db.sqlite import SqliteDb

agent = Agent(
    model=OpenAIChat(id="gpt-4o"),
    tools=[DuckDuckGoTools()],
    db=SqliteDb(db_file="tmp/agents.db"),
    add_history_to_context=True,
    num_history_runs=5,
    store_media=False,           # Don't persist uploaded files
    store_tool_messages=False,   # Don't persist tool call details
    store_history_messages=False,# Don't persist old history
)

# The agent works normally, tools execute, history is available during the run
# Only the database storage is reduced
agent.print_response("Search for the latest AI news and summarize it")
```

This configuration is useful for high-volume production systems where you want to minimize storage costs while maintaining full agent capabilities.

**Learn more:**
- [Disable Storing History Messages](/examples/basics/agent/session/09_disable_storing_history_messages)
- [Disable Storing Tool Messages](/examples/basics/agent/session/10_disable_storing_tool_messages)

## Developer Resources

- View the [Agent schema](/reference/agents/agent)
- View the [Session schema](/reference/agents/session)
- View [Cookbook](https://github.com/agno-agi/agno/tree/main/cookbook/agents/session/)
