---
title: Enable Workflow History
sidebarTitle: Enable History
description: Enable history for all steps or specific steps in your workflow
---

## Enable for All Steps

Set `add_workflow_history_to_steps=True` on the workflow to enable history for all steps:

```python
from agno.workflow import Workflow
from agno.workflow.step import Step
from agno.agent import Agent
from agno.db.sqlite import SqliteDb
from agno.models.openai import OpenAIChat

researcher = Agent(
    name="Researcher",
    model=OpenAIChat(id="gpt-4o"),
)

analyzer = Agent(
    name="Analyzer",
    model=OpenAIChat(id="gpt-4o"),
)

reviewer = Agent(
    name="Reviewer",
    model=OpenAIChat(id="gpt-4o"),
)

workflow = Workflow(
    name="Research Pipeline",
    description="Research and analyze topics",
    db=SqliteDb(db_file="workflows.db"),
    steps=[
        Step(name="Research", agent=researcher),
        Step(name="Analyze", agent=analyzer),
        Step(name="Review", agent=reviewer),
    ],
    add_workflow_history_to_steps=True,  # Enable for ALL steps
)

# First run
workflow.run(input="Research AI trends")

# Second run - all steps see the previous run
workflow.run(input="Research ML automation")
```

All three steps (Research, Analyze, Review) will now see the history from previous workflow runs.

## Enable for Specific Steps

You can control history on a per-step basis using `add_workflow_history` on individual steps:

```python
workflow = Workflow(
    name="Content Pipeline",
    db=SqliteDb(db_file="workflows.db"),
    steps=[
        # Research step doesn't need history
        Step(
            name="Research",
            agent=researcher,
            add_workflow_history=False,
        ),
        # Writer sees previous content to avoid repetition
        Step(
            name="Write",
            agent=writer,
            add_workflow_history=True,  # Enable for this step only
        ),
        # Publisher doesn't need history
        Step(
            name="Publish",
            agent=publisher,
        ),
    ],
    add_workflow_history_to_steps=False,  # Disabled by default
)
```

<Note>
When `add_workflow_history` is set on a step, it overrides the workflow-level setting. If it's `None` (not set), the step uses the workflow's default.
</Note>

## Step-Level Override

Step-level settings override workflow-level settings:

```python
workflow = Workflow(
    name="Mixed History Workflow",
    db=SqliteDb(db_file="workflows.db"),
    steps=[
        # Uses workflow default (True)
        Step(name="Step 1", agent=agent1),
        
        # Explicitly disabled, overrides workflow default
        Step(
            name="Step 2",
            agent=agent2,
            add_workflow_history=False,  # Override: disable
        ),
        
        # Explicitly enabled (redundant but clear)
        Step(
            name="Step 3",
            agent=agent3,
            add_workflow_history=True,  # Override: enable
        ),
    ],
    add_workflow_history_to_steps=True,  # Default for all steps
)
```

## Complete Example: Content Creation

```python
from agno.agent import Agent
from agno.workflow import Workflow
from agno.workflow.step import Step
from agno.db.sqlite import SqliteDb
from agno.models.openai import OpenAIChat

# Research agent doesn't need to see previous content
research_agent = Agent(
    name="Research Specialist",
    model=OpenAIChat(id="gpt-4o"),
    instructions=[
        "You are a research specialist who gathers information on topics.",
        "Conduct thorough research and provide key facts, trends, and insights.",
    ],
)

# Content creator needs to see previous content to avoid repetition
content_creator = Agent(
    name="Content Creator",
    model=OpenAIChat(id="gpt-4o"),
    instructions=[
        "You are an expert content creator who writes engaging content.",
        "IMPORTANT: Review workflow history to understand:",
        "- What content topics have been covered before",
        "- What writing styles and formats were used previously",
        "- User preferences and content patterns",
        "Avoid repeating similar content or approaches.",
        "Build on previous themes while keeping content fresh and original.",
    ],
)

# Publisher doesn't need history
publisher_agent = Agent(
    name="Content Publisher",
    model=OpenAIChat(id="gpt-4o"),
    instructions=[
        "You are a content publishing specialist.",
        "Review the created content and prepare it for publication.",
        "Add appropriate hashtags, formatting, and publishing recommendations.",
    ],
)

workflow = Workflow(
    name="Smart Content Creation Pipeline",
    description="Research → Content Creation (with history awareness) → Publishing",
    db=SqliteDb(db_file="content_workflow.db"),
    steps=[
        Step(
            name="Research Phase",
            agent=research_agent,
            add_workflow_history=False,  # No history needed
        ),
        Step(
            name="Content Creation",
            agent=content_creator,
            add_workflow_history=True,  # Enable history for this step
        ),
        Step(
            name="Content Publishing",
            agent=publisher_agent,
            add_workflow_history=False,  # No history needed
        ),
    ],
)

# Usage
workflow.print_response("Create a LinkedIn post about AI trends in 2024")
workflow.print_response("Write a Twitter thread about productivity tips")
workflow.print_response("Create a blog intro about remote work benefits")

# The Content Creator will reference previous content to avoid repetition
```

## When to Enable History

### Good Use Cases for History

Enable history when your steps need to:
- Avoid repeating previous work
- Build on prior results
- Maintain consistency across runs
- Learn from past executions
- Compare or reference earlier outputs

### When to Skip History

Don't enable history when:
- The step performs independent operations
- Historical context isn't relevant
- You want to save token usage
- The step is purely functional (formatting, data transformation)

## Verification

To verify history is working, check what your agents receive:

```python
# Enable debug mode to see the full input
import logging
logging.basicConfig(level=logging.DEBUG)

workflow = Workflow(
    name="Debug Workflow",
    db=SqliteDb(db_file="debug.db"),
    steps=[
        Step(name="Test", agent=test_agent, add_workflow_history=True),
    ],
    add_workflow_history_to_steps=True,
)

# Run twice and check logs
workflow.run(input="First run")
workflow.run(input="Second run")  # Check logs for <workflow_history_context>
```

## Troubleshooting

### History Not Appearing

If your steps aren't seeing history:

1. **Check database is set:** Workflow must have a `db` parameter
2. **Verify history is enabled:** Check `add_workflow_history_to_steps=True` or step-level setting
3. **Ensure you have completed runs:** History only includes completed runs
4. **Check session ID:** Make sure runs are using the same session

```python
# Correct setup
workflow = Workflow(
    name="My Workflow",
    db=SqliteDb(db_file="workflow.db"),  # ✅ Database set
    add_workflow_history_to_steps=True,   # ✅ History enabled
    steps=[...],
)
```

## Related Topics

<CardGroup cols={2}>
  <Card title="Control History Size" icon="list-ol" href="/basics/sessions/workflow-sessions/workflow-history/usage/control-size">
    Limit the number of runs included
  </Card>
  <Card title="Common Use Cases" icon="lightbulb" href="/basics/sessions/workflow-sessions/workflow-history/usage/use-cases">
    Practical examples and patterns
  </Card>
</CardGroup>

