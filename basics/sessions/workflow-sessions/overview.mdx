---
title: Workflow Sessions
sidebarTitle: Workflow Sessions
description: Learn how workflow sessions track multi-step pipeline executions
---

## What are Workflow Sessions?

Workflow sessions track the execution history of your workflows. Unlike agent or team sessions that store conversation messages, workflow sessions store complete **workflow runs**, where each run represents a full execution of all your workflow steps from input to final output.

Think of it this way:
- **Agent/Team sessions** = conversation history (messages back and forth)
- **Workflow sessions** = execution history (complete pipeline runs with results)

## When to Use Workflow Sessions

Use workflow sessions when you need to:

- **Track workflow execution history** across multiple runs
- **Share state between steps** in a workflow (like passing data between pipeline stages)
- **Enable workflows to learn from previous runs** by accessing past inputs and outputs
- **Persist workflow results** for analysis and debugging
- **Maintain context** across multiple workflow executions

## How Workflow Sessions Work

When you create a workflow with a database, Agno automatically manages sessions for you:

```python
from agno.workflow import Workflow
from agno.db.sqlite import SqliteDb

workflow = Workflow(
    name="Research Pipeline",
    db=SqliteDb(db_file="workflows.db"),
    steps=[...],
)

# Each run creates or updates the workflow session
result = workflow.run(input="AI trends")
```

Each time you run the workflow, Agno:

1. Creates a unique `run_id` for this execution
2. Stores the input, output, and all step results
3. Updates the session with the new run
4. Makes the history available for future runs

## Workflow Session Structure

A workflow session stores:

```python
@dataclass
class WorkflowSession:
    session_id: str           # Unique session identifier
    user_id: str | None       # User who owns this session
    workflow_id: str | None   # Which workflow this belongs to
    workflow_name: str | None # Name of the workflow
    
    # List of all workflow runs (executions)
    runs: List[WorkflowRunOutput] | None
    
    # Session-specific data
    session_data: Dict | None    # Includes session_name, session_state
    workflow_data: Dict | None   # Workflow configuration
    metadata: Dict | None        # Custom metadata
    
    created_at: int | None    # Unix timestamp
    updated_at: int | None    # Unix timestamp
```

<Note>
Unlike agent sessions, workflow sessions don't have a `summary` field. Workflows store complete run results instead of creating summaries.
</Note>

## Key Differences from Agent/Team Sessions

If you're familiar with agent or team sessions, here are the main differences:

| Feature | Agent/Team Sessions | Workflow Sessions |
|---------|-------------------|------------------|
| **What's stored** | Messages and conversation turns | Complete workflow runs with step results |
| **History type** | Message-based (chat history) | Run-based (execution history) |
| **Session state** | Optional metadata | First-class feature for cross-step data sharing |
| **Summaries** | Supported with `enable_session_summaries` | Not supported (stores complete runs) |
| **History format** | Messages in LLM context | Previous run results prepended to step inputs |

## Setting up Workflow Sessions

### Basic Setup with Database

To enable sessions, provide a database when creating your workflow:

```python
from agno.workflow import Workflow
from agno.workflow.step import Step
from agno.agent import Agent
from agno.db.sqlite import SqliteDb

researcher = Agent(name="Researcher", ...)

workflow = Workflow(
    name="Research Pipeline",
    description="Research and analyze topics",
    db=SqliteDb(db_file="workflows.db"),
    steps=[
        Step(name="Research", agent=researcher),
        Step(name="Analyze", agent=analyzer),
    ],
)
```

### With Session ID

You can provide a specific session ID to group multiple runs:

```python
# All runs with this session_id will be grouped together
workflow = Workflow(
    name="Research Pipeline",
    db=SqliteDb(db_file="workflows.db"),
    session_id="user-123-research",
    steps=[...],
)

# Or pass it during execution
workflow.run(input="AI trends", session_id="user-123-research")
```

If you don't provide a `session_id`, Agno generates one automatically and makes it "sticky" to the workflow instance.

### With User ID

Track which user's session this belongs to:

```python
workflow = Workflow(
    name="Research Pipeline",
    db=SqliteDb(db_file="workflows.db"),
    user_id="user-123",
    steps=[...],
)

# Or pass during execution
workflow.run(input="AI trends", user_id="user-123")
```

## Database Options

Workflow sessions require a database to persist execution history. Agno supports multiple database types:

```python
from agno.db.sqlite import SqliteDb

# Quick start - SQLite
workflow = Workflow(
    name="Research Pipeline",
    db=SqliteDb(db_file="workflows.db"),
    steps=[...],
)
```

<Card title="Database Configuration Guide" icon="database" href="/basics/storage/overview">
  See all supported databases, connection options, and production recommendations
</Card>

## What Gets Stored

Each workflow run stores:

- **Input:** The data passed to `workflow.run()`
- **Output:** The final result from the workflow
- **Step results:** Output from each step in the pipeline
- **Metadata:** Execution time, status, metrics
- **Session state:** Shared data between steps (if used)

## Workflow History

Workflow history lets workflow steps access results from previous runs. When enabled, Agno formats prior run results and prepends them to each step input so future executions can build on that context.

### Enable history for your steps

```python
from agno.workflow import Workflow
from agno.db.sqlite import SqliteDb

workflow = Workflow(
    name="Content Pipeline",
    db=SqliteDb(db_file="workflows.db"),
    steps=[...],
    add_workflow_history_to_steps=True,  # Include previous runs
    num_history_runs=5,                  # Limit how many runs to load
)
```

### Why it helps

- **Learn from previous runs** instead of repeating work
- **Reference past decisions** to keep outputs consistent
- **Maintain context** across multi-run workflows
- **Build on prior results** for richer analysis

### History format

Agno wraps past runs in a structured XML block before inserting it into each step input:

```xml
<workflow_history_context>
[Workflow Run-1]
User input: Create a blog post about AI
Workflow output: [Full output from run]

[Workflow Run-2]
User input: Write about machine learning
Workflow output: [Full output from run]
</workflow_history_context>
```

See the [workflow history implementation guide](/basics/chat-history/workflow/overview) for advanced controls, per-step overrides, and programmatic access patterns.

## Common Patterns

### Single User Workflow

```python
# One workflow instance per user
user_workflow = Workflow(
    name="Personal Assistant",
    db=db,
    session_id=f"user-{user_id}",
    user_id=user_id,
    steps=[...],
)

# All runs for this user are tracked in one session
user_workflow.run(input="Task 1")
user_workflow.run(input="Task 2")
```

### Multi-Turn Workflow

```python
# Workflow remembers previous executions
workflow = Workflow(
    name="Content Creator",
    db=db,
    steps=[...],
)

# First execution
workflow.run(input="Write about AI")

# Second execution (same session)
workflow.run(input="Now write about ML")
```

### Temporary Sessions

```python
# No database = no session persistence
workflow = Workflow(
    name="One-off Task",
    steps=[...],  # No db parameter
)

# Runs independently, no history stored
workflow.run(input="Process this once")
```

## Session Naming

Give your workflow sessions meaningful names for easier identification:

### Manual Naming

```python
from agno.workflow import Workflow
from agno.db.sqlite import SqliteDb

workflow = Workflow(
    name="Research Pipeline",
    db=SqliteDb(db_file="workflows.db"),
    steps=[...],
)

workflow.run(input="Analyze AI trends")
workflow.set_session_name(session_name="AI Trends Analysis Q4 2024")

# Retrieve the name
name = workflow.get_session_name()
print(name)  # "AI Trends Analysis Q4 2024"
```

### Auto-Generation

Workflow sessions can auto-generate timestamp-based names:

```python
workflow = Workflow(
    name="Research Pipeline",
    description="Automated research and analysis pipeline",
    db=SqliteDb(db_file="workflows.db"),
    steps=[...],
)

workflow.run(input="Research topic")
workflow.set_session_name(autogenerate=True)

name = workflow.get_session_name()
print(name)  # "Automated research and analysis pipel - 2024-11-19 14:30"
```

<Note>
Unlike agent/team sessions which use AI to generate names from conversation content (e.g., "Python Best Practices"), workflow sessions use timestamp-based formatting since they represent executions rather than conversations.
</Note>

## Next Steps

Now that you understand workflow sessions, explore these features:

<CardGroup cols={2}>
  <Card title="Workflow History" icon="clock-rotate-left" href="/basics/chat-history/workflow/overview">
    Enable workflows to learn from previous runs
  </Card>
  <Card title="Session State" icon="database" href="/basics/state/workflows/overview">
    Share data between workflow steps across runs
  </Card>
  <Card title="Session Management" icon="tag" href="/basics/sessions/session-management/overview">
    Manage session names, IDs, and organization
  </Card>
  <Card title="Conversational Workflows" icon="comments" href="/basics/workflows/conversational-workflows">
    Make workflows interactive with WorkflowAgent
  </Card>
  <Card title="Metrics" icon="chart-line" href="/basics/sessions/metrics/workflow">
    Track workflow performance and usage
  </Card>
  <Card title="Database Setup" icon="database" href="/basics/storage/overview">
    Configure databases for session storage
  </Card>
</CardGroup>

## Developer Resources

- View the [Workflow schema](/reference/workflows/workflow)
- View the [WorkflowSession schema](/reference/workflows/session)
- Browse [workflow session examples](https://github.com/agno-agi/agno/tree/main/cookbook/workflows)
