---
title: Workflow Sessions
sidebarTitle: Overview
description: Learn how workflow sessions track multi-step pipeline executions
---

## What are Workflow Sessions?

Workflow sessions track the execution history of your workflows. Unlike agent or team sessions that store conversation messages, workflow sessions store complete **workflow runs**, where each run represents a full execution of all your workflow steps from input to final output.

Think of it this way:
- **Agent/Team sessions** = conversation history (messages back and forth)
- **Workflow sessions** = execution history (complete pipeline runs with results)

## When to Use Workflow Sessions

Use workflow sessions when you need to:

- **Track workflow execution history** across multiple runs
- **Share state between steps** in a workflow (like passing data between pipeline stages)
- **Enable workflows to learn from previous runs** by accessing past inputs and outputs
- **Persist workflow results** for analysis and debugging
- **Maintain context** across multiple workflow executions

## How Workflow Sessions Work

When you create a workflow with a database, Agno automatically manages sessions for you:

```python
from agno.workflow import Workflow
from agno.db.sqlite import SqliteDb

workflow = Workflow(
    name="Research Pipeline",
    db=SqliteDb(db_file="workflows.db"),
    steps=[...],
)

# Each run creates or updates the workflow session
result = workflow.run(input="AI trends")
```

Each time you run the workflow, Agno:

1. Creates a unique `run_id` for this execution
2. Stores the input, output, and all step results
3. Updates the session with the new run
4. Makes the history available for future runs

## Workflow Session Structure

A workflow session stores:

```python
@dataclass
class WorkflowSession:
    session_id: str           # Unique session identifier
    user_id: str | None       # User who owns this session
    workflow_id: str | None   # Which workflow this belongs to
    workflow_name: str | None # Name of the workflow
    
    # List of all workflow runs (executions)
    runs: List[WorkflowRunOutput] | None
    
    # Session-specific data
    session_data: Dict | None    # Includes session_name, session_state
    workflow_data: Dict | None   # Workflow configuration
    metadata: Dict | None        # Custom metadata
    
    created_at: int | None    # Unix timestamp
    updated_at: int | None    # Unix timestamp
```

<Note>
Unlike agent sessions, workflow sessions don't have a `summary` field. Workflows store complete run results instead of creating summaries.
</Note>

## Key Differences from Agent/Team Sessions

If you're familiar with agent or team sessions, here are the main differences:

| Feature | Agent/Team Sessions | Workflow Sessions |
|---------|-------------------|------------------|
| **What's stored** | Messages and conversation turns | Complete workflow runs with step results |
| **History type** | Message-based (chat history) | Run-based (execution history) |
| **Session state** | Optional metadata | First-class feature for cross-step data sharing |
| **Summaries** | Supported with `enable_session_summaries` | Not supported (stores complete runs) |
| **History format** | Messages in LLM context | Previous run results prepended to step inputs |

## Setting up Workflow Sessions

### Basic Setup with Database

To enable sessions, provide a database when creating your workflow:

```python
from agno.workflow import Workflow
from agno.workflow.step import Step
from agno.agent import Agent
from agno.db.sqlite import SqliteDb

researcher = Agent(name="Researcher", ...)

workflow = Workflow(
    name="Research Pipeline",
    description="Research and analyze topics",
    db=SqliteDb(db_file="workflows.db"),
    steps=[
        Step(name="Research", agent=researcher),
        Step(name="Analyze", agent=analyzer),
    ],
)
```

### With Session ID

You can provide a specific session ID to group multiple runs:

```python
# All runs with this session_id will be grouped together
workflow = Workflow(
    name="Research Pipeline",
    db=SqliteDb(db_file="workflows.db"),
    session_id="user-123-research",
    steps=[...],
)

# Or pass it during execution
workflow.run(input="AI trends", session_id="user-123-research")
```

If you don't provide a `session_id`, Agno generates one automatically and makes it "sticky" to the workflow instance.

### With User ID

Track which user's session this belongs to:

```python
workflow = Workflow(
    name="Research Pipeline",
    db=SqliteDb(db_file="workflows.db"),
    user_id="user-123",
    steps=[...],
)

# Or pass during execution
workflow.run(input="AI trends", user_id="user-123")
```

## Database Options

Workflow sessions work with all Agno database types:

```python
# SQLite (local development)
from agno.db.sqlite import SqliteDb
db = SqliteDb(db_file="workflows.db")

# PostgreSQL (production)
from agno.db.postgres import PostgresDb
db = PostgresDb(
    host="localhost",
    port=5432,
    user="user",
    password="password",
    database="agno",
)

# JSON (simple demos)
from agno.db.json import JsonDb
db = JsonDb(db_path="tmp/workflows")

# In-memory (testing)
from agno.db.in_memory import InMemoryDb
db = InMemoryDb()
```

<Check>
For production workflows, use PostgreSQL to ensure reliable session persistence and concurrent access.
</Check>

## What Gets Stored

Each workflow run stores:

- **Input:** The data passed to `workflow.run()`
- **Output:** The final result from the workflow
- **Step results:** Output from each step in the pipeline
- **Metadata:** Execution time, status, metrics
- **Session state:** Shared data between steps (if used)

## Common Patterns

### Single User Workflow

```python
# One workflow instance per user
user_workflow = Workflow(
    name="Personal Assistant",
    db=db,
    session_id=f"user-{user_id}",
    user_id=user_id,
    steps=[...],
)

# All runs for this user are tracked in one session
user_workflow.run(input="Task 1")
user_workflow.run(input="Task 2")
```

### Multi-Turn Workflow

```python
# Workflow remembers previous executions
workflow = Workflow(
    name="Content Creator",
    db=db,
    steps=[...],
)

# First execution
workflow.run(input="Write about AI")

# Second execution (same session)
workflow.run(input="Now write about ML")
```

### Temporary Sessions

```python
# No database = no session persistence
workflow = Workflow(
    name="One-off Task",
    steps=[...],  # No db parameter
)

# Runs independently, no history stored
workflow.run(input="Process this once")
```

## Next Steps

Now that you understand workflow sessions, explore these features:

<CardGroup cols={2}>
  <Card title="Workflow History" icon="clock-rotate-left" href="/basics/sessions/workflow-sessions/workflow-history/overview">
    Learn how workflows access previous run results
  </Card>
  <Card title="Session State" icon="database" href="/basics/sessions/workflow-sessions/session-state/overview">
    Share data between workflow steps
  </Card>
  <Card title="Workflow Session Naming" icon="tag" href="/basics/sessions/workflow-sessions/workflow-naming/overview">
    Organize and identify your sessions
  </Card>
  <Card title="Workflow Agents" icon="robot" href="/basics/sessions/workflow-sessions/workflow-agents/overview">
    Use agents that decide when to run workflows
  </Card>
  <Card title="Metrics" icon="chart-line" href="/basics/sessions/workflow-sessions/metrics/overview">
    Track workflow performance over time
  </Card>
  <Card title="Persisting Sessions" icon="floppy-disk" href="/basics/sessions/persisting-sessions">
    Configure databases for session storage
  </Card>
</CardGroup>

## Developer Resources

- View the [Workflow schema](/reference/workflows/workflow)
- View the [WorkflowSession schema](/reference/workflows/session)
- Browse [workflow session examples](https://github.com/agno-agi/agno/tree/main/cookbook/workflows)

