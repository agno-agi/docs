<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 680" font-family="system-ui, -apple-system, sans-serif">
  <defs>
    <style>
      .external-zone { fill: #1f2937; stroke: #6b7280; stroke-width: 1.5; stroke-dasharray: 8,4; }
      .vpc-border { fill: #14532d; stroke: #22c55e; stroke-width: 2; }
      .subnet-border { fill: #1e3a8a; stroke: #3b82f6; stroke-width: 1.5; stroke-dasharray: 5,3; }
      .regional-zone { fill: #422006; stroke: #f59e0b; stroke-width: 1.5; stroke-dasharray: 5,3; }
      .service-box { fill: #374151; stroke: #6b7280; stroke-width: 1.5; rx: 6; }
      .agno-creates { fill: #431407; stroke: #f97316; stroke-width: 2; rx: 6; }
      .user-provides { fill: #14532d; stroke: #22c55e; stroke-width: 1.5; rx: 6; }
      .label { font-size: 11px; fill: #f3f4f6; font-weight: 500; }
      .label-small { font-size: 9px; fill: #9ca3af; }
      .label-bold { font-size: 12px; fill: #f3f4f6; font-weight: 600; }
      .zone-label { font-size: 10px; fill: #9ca3af; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
      .arrow { stroke: #9ca3af; stroke-width: 1.5; fill: none; marker-end: url(#arrowhead); }
      .arrow-dashed { stroke: #6b7280; stroke-width: 1.5; fill: none; stroke-dasharray: 4,3; }
    </style>
    <marker id="arrowhead" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#9ca3af" />
    </marker>
    <!-- User icon -->
    <symbol id="icon-user" viewBox="0 0 24 24">
      <circle cx="12" cy="8" r="4" fill="none" stroke="currentColor" stroke-width="2"/>
      <path d="M4 20c0-4 4-6 8-6s8 2 8 6" fill="none" stroke="currentColor" stroke-width="2"/>
    </symbol>
    <!-- Cloud icon -->
    <symbol id="icon-cloud" viewBox="0 0 24 24">
      <path d="M18 10h-1.26A8 8 0 109 20h9a5 5 0 000-10z" fill="none" stroke="currentColor" stroke-width="2"/>
    </symbol>
    <!-- Server/Container icon -->
    <symbol id="icon-server" viewBox="0 0 24 24">
      <rect x="2" y="2" width="20" height="8" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
      <rect x="2" y="14" width="20" height="8" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
      <circle cx="6" cy="6" r="1" fill="currentColor"/>
      <circle cx="6" cy="18" r="1" fill="currentColor"/>
    </symbol>
    <!-- Database icon -->
    <symbol id="icon-database" viewBox="0 0 24 24">
      <ellipse cx="12" cy="5" rx="9" ry="3" fill="none" stroke="currentColor" stroke-width="2"/>
      <path d="M21 5v6c0 1.66-4 3-9 3s-9-1.34-9-3V5" fill="none" stroke="currentColor" stroke-width="2"/>
      <path d="M21 11v6c0 1.66-4 3-9 3s-9-1.34-9-3v-6" fill="none" stroke="currentColor" stroke-width="2"/>
    </symbol>
    <!-- Key icon -->
    <symbol id="icon-key" viewBox="0 0 24 24">
      <circle cx="8" cy="15" r="4" fill="none" stroke="currentColor" stroke-width="2"/>
      <path d="M11 12l7-7m0 0h-4m4 0v4" fill="none" stroke="currentColor" stroke-width="2"/>
    </symbol>
    <!-- Package icon -->
    <symbol id="icon-package" viewBox="0 0 24 24">
      <path d="M12 2L2 7l10 5 10-5-10-5z" fill="none" stroke="currentColor" stroke-width="2"/>
      <path d="M2 7v10l10 5 10-5V7" fill="none" stroke="currentColor" stroke-width="2"/>
      <path d="M12 12v10" fill="none" stroke="currentColor" stroke-width="2"/>
    </symbol>
    <!-- Folder icon -->
    <symbol id="icon-folder" viewBox="0 0 24 24">
      <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z" fill="none" stroke="currentColor" stroke-width="2"/>
    </symbol>
    <!-- Shield icon -->
    <symbol id="icon-shield" viewBox="0 0 24 24">
      <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" fill="none" stroke="currentColor" stroke-width="2"/>
    </symbol>
    <!-- Globe icon -->
    <symbol id="icon-globe" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2"/>
      <path d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z" fill="none" stroke="currentColor" stroke-width="2"/>
    </symbol>
    <!-- Lock icon for HTTPS -->
    <symbol id="icon-lock" viewBox="0 0 24 24">
      <rect x="3" y="11" width="18" height="11" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
      <path d="M7 11V7a5 5 0 0110 0v4" fill="none" stroke="currentColor" stroke-width="2"/>
    </symbol>
  </defs>

  <!-- Background -->
  <rect width="800" height="680" fill="#0f172a"/>

  <!-- External Zone -->
  <rect class="external-zone" x="20" y="15" width="760" height="95" rx="8"/>
  <text class="zone-label" x="40" y="35">External</text>

  <!-- Users -->
  <g transform="translate(100, 45)">
    <rect class="service-box" x="0" y="0" width="100" height="50" rx="6"/>
    <use href="#icon-user" x="10" y="10" width="24" height="24" style="color:#9ca3af"/>
    <text class="label-bold" x="42" y="28">Users</text>
    <text class="label-small" x="42" y="40">HTTPS</text>
  </g>

  <!-- os.agno.com (EXTERNAL - not in VPC!) -->
  <g transform="translate(580, 45)">
    <rect x="0" y="0" width="130" height="50" style="fill:#1e3a8a;stroke:#60a5fa;stroke-width:2" rx="6"/>
    <use href="#icon-cloud" x="10" y="10" width="24" height="24" style="color:#60a5fa"/>
    <text class="label-bold" x="42" y="25" fill="#93c5fd">os.agno.com</text>
    <text class="label-small" x="42" y="38" fill="#60a5fa">Control Plane</text>
  </g>

  <!-- Your Existing VPC -->
  <rect class="vpc-border" x="20" y="125" width="760" height="380" rx="8"/>
  <text x="40" y="148" fill="#4ade80" font-size="13" font-weight="600">Your VPC</text>
  <text x="40" y="162" fill="#9ca3af" font-size="9">(with Internet Gateway)</text>

  <!-- Your Subnets -->
  <rect class="subnet-border" x="40" y="175" width="720" height="310" rx="6"/>
  <text x="60" y="195" fill="#60a5fa" font-size="11" font-weight="500">Public Subnets (aws_subnet_ids)</text>

  <!-- Agno Creates Section Header -->
  <text x="60" y="225" fill="#fb923c" font-size="10" font-weight="600">AGNO CREATES:</text>

  <!-- Application Load Balancer -->
  <g transform="translate(80, 240)">
    <rect class="agno-creates" x="0" y="0" width="160" height="70"/>
    <use href="#icon-globe" x="15" y="20" width="28" height="28" style="color:#fb923c"/>
    <text class="label-bold" x="55" y="30" fill="#fdba74">Application</text>
    <text class="label-bold" x="55" y="45" fill="#fdba74">Load Balancer</text>
    <g transform="translate(55, 50)">
      <use href="#icon-lock" x="0" y="0" width="12" height="12" style="color:#4ade80"/>
      <text class="label-small" x="16" y="10" fill="#4ade80">HTTPS</text>
    </g>
  </g>

  <!-- Security Group indicator for ALB -->
  <g transform="translate(80, 315)">
    <use href="#icon-shield" x="0" y="0" width="16" height="16" style="color:#fb923c"/>
    <text class="label-small" x="20" y="12" fill="#fb923c">LB Security Group</text>
  </g>

  <!-- ECS Fargate Cluster -->
  <g transform="translate(300, 240)">
    <rect class="agno-creates" x="0" y="0" width="200" height="100"/>
    <text class="label-small" x="10" y="18" fill="#fb923c">ECS Fargate</text>

    <!-- AgentOS Container (unified - includes your agents) -->
    <g transform="translate(15, 30)">
      <rect x="0" y="0" width="165" height="55" style="fill:#7c2d12;stroke:#fb923c;stroke-width:1.5" rx="4"/>
      <use href="#icon-server" x="8" y="8" width="20" height="20" style="color:#fdba74"/>
      <text style="font-size:10px;fill:#fed7aa;font-weight:600" x="35" y="18">AgentOS Container</text>
      <text style="font-size:8px;fill:#fdba74" x="35" y="32">Your Agents, Teams, Workflows</text>
      <text style="font-size:7px;fill:#fdba74" x="35" y="45">port 8000</text>
    </g>
  </g>

  <!-- Security Group indicator for App -->
  <g transform="translate(300, 375)">
    <use href="#icon-shield" x="0" y="0" width="16" height="16" style="color:#fb923c"/>
    <text class="label-small" x="20" y="12" fill="#fb923c">App Security Group</text>
  </g>

  <!-- RDS PostgreSQL -->
  <g transform="translate(560, 240)">
    <rect class="agno-creates" x="0" y="0" width="140" height="90"/>
    <use href="#icon-database" x="15" y="20" width="30" height="30" style="color:#fb923c"/>
    <text class="label-bold" x="55" y="30" fill="#fdba74">RDS</text>
    <text class="label-small" x="55" y="44" fill="#fed7aa">PostgreSQL</text>
    <text class="label-small" x="55" y="56" fill="#fed7aa">+ pgvector</text>
    <text style="font-size:8px;fill:#9ca3af" x="55" y="75">(single AZ)</text>
  </g>

  <!-- Security Group indicator for DB -->
  <g transform="translate(560, 335)">
    <use href="#icon-shield" x="0" y="0" width="16" height="16" style="color:#fb923c"/>
    <text class="label-small" x="20" y="12" fill="#fb923c">DB Security Group</text>
  </g>

  <!-- EFS (Optional) -->
  <g transform="translate(560, 380)">
    <rect x="0" y="0" width="140" height="70" style="fill:#422006;stroke:#f59e0b;stroke-width:1.5;stroke-dasharray:4,2" rx="6"/>
    <use href="#icon-folder" x="15" y="18" width="24" height="24" style="color:#fbbf24"/>
    <text class="label-bold" x="48" y="30" fill="#fcd34d">EFS</text>
    <text class="label-small" x="48" y="44" fill="#fbbf24">Storage</text>
    <text style="font-size:8px;fill:#9ca3af" x="48" y="58">(optional, you create)</text>
  </g>

  <!-- AWS Regional Services -->
  <rect class="regional-zone" x="20" y="520" width="760" height="90" rx="8"/>
  <text class="zone-label" x="40" y="540">AWS Regional Services (not in VPC)</text>

  <!-- ECR -->
  <g transform="translate(80, 555)">
    <rect class="service-box" x="0" y="0" width="100" height="45"/>
    <use href="#icon-package" x="10" y="8" width="22" height="22" style="color:#9ca3af"/>
    <text class="label" x="38" y="20">ECR</text>
    <text class="label-small" x="38" y="32">Images</text>
  </g>

  <!-- Secrets Manager -->
  <g transform="translate(220, 555)">
    <rect class="service-box" x="0" y="0" width="120" height="45"/>
    <use href="#icon-key" x="10" y="8" width="22" height="22" style="color:#9ca3af"/>
    <text class="label" x="38" y="20">Secrets Manager</text>
    <text class="label-small" x="38" y="32">API Keys, DB Creds</text>
  </g>

  <!-- CloudWatch -->
  <g transform="translate(380, 555)">
    <rect class="service-box" x="0" y="0" width="100" height="45"/>
    <rect x="15" y="12" width="16" height="3" fill="#9ca3af"/>
    <rect x="15" y="18" width="16" height="3" fill="#9ca3af"/>
    <rect x="15" y="24" width="16" height="3" fill="#9ca3af"/>
    <text class="label" x="38" y="20">CloudWatch</text>
    <text class="label-small" x="38" y="32">Logs</text>
  </g>

  <!-- IAM -->
  <g transform="translate(520, 555)">
    <rect class="service-box" x="0" y="0" width="100" height="45"/>
    <use href="#icon-shield" x="10" y="8" width="22" height="22" style="color:#9ca3af"/>
    <text class="label" x="38" y="20">IAM</text>
    <text class="label-small" x="38" y="32">Roles &amp; Policies</text>
  </g>

  <!-- Arrows -->
  <!-- Users to ALB -->
  <path class="arrow" d="M 150 95 L 150 120 L 160 120 L 160 240"/>

  <!-- os.agno.com to ALB -->
  <path class="arrow" d="M 645 95 L 645 150 L 200 150 L 200 240"/>

  <!-- ALB to ECS -->
  <path class="arrow" d="M 240 275 L 300 275"/>

  <!-- ECS to RDS -->
  <path class="arrow" d="M 500 305 L 560 305"/>

  <!-- ECS to EFS (dashed - optional) -->
  <path class="arrow-dashed" d="M 500 340 L 530 340 L 530 415 L 560 415"/>

  <!-- Legend -->
  <g transform="translate(20, 625)">
    <rect x="0" y="0" width="760" height="45" fill="#1f2937" stroke="#374151" rx="4"/>

    <rect x="20" y="12" width="20" height="14" style="fill:#431407;stroke:#f97316;stroke-width:2" rx="2"/>
    <text class="label-small" x="48" y="23">Agno Creates</text>

    <rect x="150" y="12" width="20" height="14" style="fill:#422006;stroke:#f59e0b;stroke-width:1.5;stroke-dasharray:3,2" rx="2"/>
    <text class="label-small" x="178" y="23">Optional</text>

    <line x1="280" y1="19" x2="310" y2="19" stroke="#9ca3af" stroke-width="1.5"/>
    <polygon points="310,19 305,16 305,22" fill="#9ca3af"/>
    <text class="label-small" x="318" y="23">Data Flow</text>

    <use href="#icon-shield" x="420" y="10" width="16" height="16" style="color:#fb923c"/>
    <text class="label-small" x="442" y="23">Security Group</text>

    <use href="#icon-lock" x="560" y="10" width="16" height="16" style="color:#4ade80"/>
    <text class="label-small" x="582" y="23">HTTPS Required</text>
  </g>
</svg>
