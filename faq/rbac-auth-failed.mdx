---
title: Authorization Failed - JWT Verification
sidebarTitle: Authorization Failed - JWT Verification
---

If you are experiencing authorization failures when both security key and JWT verification are enabled in your AgentOS, this guide will help you resolve the issue.

## The Issue

When both security key authentication and JWT verification are enabled simultaneously, you may encounter an authorization failed error:

![Authorization Failed Error](/images/auth-failed.png)

This occurs because security key is deprecated now and JWT verification is preferred over it. Learn more about [security key deprecation](https://docs.agno.com/agent-os/security/overview#security-key-authentication-deprecated).

## Solution

The solution depends on your AgentOS version:

### For Older Versions (Before v2.3.13)


If you are running an AgentOS version older than **v2.3.13**, the platform only supports security key authentication. You should:

1. **Disable Authorization** on the AgentOS Control Plane
2. Continue using security key authentication only

### For Newer Versions <Badge icon="code-branch" color="orange"><Tooltip tip="Introduced in v2.3.13" cta="View release notes" href="https://github.com/agno-agi/agno/releases/tag/v2.3.13">v2.3.13</Tooltip></Badge> and Later

If you are running AgentOS version **v2.3.13** or newer, we recommend:

1. **Use JWT verification** as the primary authentication method
2. **Disable security key authentication** from the AgentOS Control Plane
3. **Unset the security key** from your environment:

```bash
# Remove the old security key
unset OS_SECURITY_KEY
```

4. **Switch on JWT verification** and set the verification key. [More info](https://docs.agno.com/agent-os/security/overview#migrating-to-rbac)

```bash
# Set the new JWT verification key
export JWT_VERIFICATION_KEY="your-public-key"
```

JWT verification is the recommended approach for newer versions as it provides fine-grained permissions of RBAC.

## Next Steps

- [JWT configuration docs](https://docs.agno.com/agent-os/security/overview)
- [Migration to RBAC](https://docs.agno.com/agent-os/security/overview#migrating-to-rbac)
